<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <section>
        <h1>All Persons</h1>
        <h:form id="personListForm">
            <ui:repeat value="#{personBean.showAllPersons()}" var="person">
                #{person.firstname} #{person.lastname}
                <p:growl id="growl" life="2000"/>
                <p:commandButton value="#{person.friendState}" id="nonAjax"
                                 actionListener="#{personBean.changeFriendState(person.id)}"
                                 update=":personListForm">
                </p:commandButton>
                <br/>
            </ui:repeat>
        </h:form>
    </section>
</ui:composition>