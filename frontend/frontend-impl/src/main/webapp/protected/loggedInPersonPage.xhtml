<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <f:metadata>
	    <f:event type="preRenderView" listener="#{personBean.showLoggedInPerson}" />
	</f:metadata>
    <section>
    	<c:if test="${not empty personBean.person.firstname}">
    		<h:form>
			    <p>
			    	<c:if test="${not empty personBean.person.imageUrl}">
			    		<img src="#{personBean.person.imageUrl}" /> 
			    	</c:if>
			    	<p>
				    	<label>Image URL: <p:inputText value="#{personBean.person.imageUrl}"/></label>
				    	<p:commandButton value="Change" action="#{personBean.saveData}" ajax="false"></p:commandButton>
				    	<p:commandButton value="Delete" action="#{personBean.clearImgUrl}" ajax="false"></p:commandButton>
			    	</p>
			    	<p>
			    		<label>Firstname: <p:inputText value="#{personBean.person.firstname}" /></label>
			    	  	<label>Lastname: <p:inputText value="#{personBean.person.lastname}" /></label>
			    	  	<p:commandButton value="Change" action="#{personBean.saveData}"></p:commandButton>
			    	</p>
			    </p>
			    <c:if test="${not empty personBean.person.address}">
			    	<p>Addresse: #{personBean.person.address}</p>
			    </c:if>
			    <c:if test="${not empty personBean.person.place}">
			    	<p>Ort: #{personBean.person.place}</p>
			    </c:if>
			    <c:if test="${not empty personBean.person.department}">
			    	<p>Abteilung: #{personBean.person.department.name}</p>
			    </c:if>
			    <c:if test="${not empty personBean.person.status.name}">
			    	<p>Status: #{personBean.person.status.name}</p>
			    </c:if>
		    	<section>
		    		<h1>Mail Adressen</h1>
		    		<p>#{personBean.person.user.mail}</p>
		    		<c:forEach var="mail" items="#{personBean.person.additionalMails}">
		    			<p>#{mail.value}</p>
		    		</c:forEach>
		    	</section>
		    	<section>
		    		<h1>Hobbies</h1>
		    		<c:forEach var="hobby" items="#{personBean.person.hobbies}">
		    			<p>#{hobby.value}</p>
		    		</c:forEach>
		    	</section>
		    	<section>
		    		<h1>FÃ¤higkeiten</h1>
		    		<c:forEach var="knowledge" items="#{personBean.person.knowledges}">
		    			<p>#{knowledge.value}</p>
		    		</c:forEach>
		    	</section>
		    	<section>
		    		<h1>Telefonnummern</h1>
		    		<c:forEach var="number" items="#{personBean.person.phonenumbers}">
		    			<p>#{number.value}</p>
		    		</c:forEach>
		    	</section>
		    	<p><p:commandButton value="Save Changes" action="#{personBean.savePerson}" ajax='false'></p:commandButton></p>
	    	</h:form>
	    </c:if>
	    <c:if test="${empty personBean.person.firstname}">
	    	<h1>You have not told us your name yet!</h1>
	    	<h:form>
	    		<p><label>Firstname: <p:inputText value="#{personBean.person.firstname}"></p:inputText></label></p>
	    		<p><label>Lastname: <p:inputText value="#{personBean.person.lastname}"></p:inputText></label></p>
	            <p:commandButton value="Save" action="#{personBean.createLoggedInPerson}" ajax='false'/>
	        </h:form>
	    </c:if>
    </section>
</ui:composition>